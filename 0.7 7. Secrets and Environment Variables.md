Here‚Äôs a detailed explanation of **Secrets and Environment Variables** in GitHub Actions, along with **interview questions** and **real-world scenarios**:

---

## ‚úÖ **7. Secrets and Environment Variables ‚Äì Detailed Notes**

---

### üîπ **Secrets**

**Secrets** are sensitive values (like API keys, passwords, tokens) that should never be hard-coded in your workflow files.

#### ‚úÖ How to define secrets:

* Go to **GitHub Repository ‚Üí Settings ‚Üí Secrets and variables ‚Üí Actions ‚Üí Secrets**
* Add key‚Äìvalue pairs (e.g., `MY_SECRET = abc123`)

#### ‚úÖ How to use secrets in workflows:

```yaml
- name: Use secret
  run: echo "${{ secrets.MY_SECRET }}"
```

‚ö†Ô∏è **Note:** Secrets are masked in logs and **never exposed to pull requests from forks** (for security reasons).

---

### üîπ **Environment Variables (`env`)**

Environment variables store non-sensitive configuration like environment names, modes, versions, etc.

#### ‚úÖ Set globally:

```yaml
env:
  NODE_ENV: production
```

#### ‚úÖ Set per step:

```yaml
- name: Set variable
  run: echo $NODE_ENV
  env:
    NODE_ENV: staging
```

---

### üîπ **Key Differences:**

| Feature       | Secrets (`secrets.X`)           | Env Variables (`env:`)      |
| ------------- | ------------------------------- | --------------------------- |
| Use Case      | Sensitive data (tokens, keys)   | Configuration data          |
| Storage       | Encrypted in GitHub             | In workflow YAML            |
| Scope         | Repository, org, or environment | Workflow or step            |
| Access Syntax | `${{ secrets.MY_SECRET }}`      | `env:` key or `process.env` |

---

## üéØ **Interview Questions with Answers**

---

### 1. **How are secrets handled in GitHub Actions?**

Secrets are stored encrypted and securely in GitHub. They are accessed in workflows via `${{ secrets.SECRET_NAME }}` and masked in logs.

---

### 2. **What‚Äôs the difference between secrets and environment variables in GitHub Actions?**

* **Secrets**: For confidential info (tokens, passwords).
* **Environment variables**: For general settings (env mode, versions).

---

### 3. **Can secrets be used in all workflows?**

Yes, but secrets **from forked repositories** are not exposed to prevent unauthorized access.

---

### 4. **How would you pass a secret to a Docker container or CLI command?**

```yaml
- run: docker login -u $USERNAME -p ${{ secrets.DOCKER_PASSWORD }}
```

---

### 5. **Can you scope secrets per environment (e.g., staging vs prod)?**

Yes, GitHub supports **environment-level secrets** for finer control under `Environments` in repo settings.

---

## üß© **Scenario-Based Questions with Answers**

---

### üîπ **Scenario 1:**

**Q:** You want to store a `PROD_API_KEY` safely and use it only for production deployments. What do you do?

**A:**

* Store `PROD_API_KEY` as an **environment secret** under a `production` environment.
* Reference it in the workflow like:

```yaml
jobs:
  deploy:
    environment: production
    steps:
      - run: curl -H "Authorization: Bearer ${{ secrets.PROD_API_KEY }}"
```

---

### üîπ **Scenario 2:**

**Q:** Your workflow uses `NODE_ENV=production` in multiple jobs. How can you define it globally?

**A:**

```yaml
env:
  NODE_ENV: production

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - run: echo $NODE_ENV
```

---

### üîπ **Scenario 3:**

**Q:** You want to debug the value of an env var without exposing secrets. What‚Äôs your approach?

**A:**
Use `echo` or `printenv`, but **never log secrets** directly:

```yaml
- run: echo "Running in $ENVIRONMENT"
```

Avoid:

```yaml
- run: echo "${{ secrets.MY_SECRET }}"  # ‚ùå bad practice
```

---

### üîπ **Scenario 4:**

**Q:** A contributor from a fork opens a pull request that triggers a workflow using secrets. Will it work?

**A:**
**No.** GitHub **does not expose secrets to workflows triggered from forked repositories** for security reasons.

---

Let me know if you want a cheat sheet or a template to manage secrets across multiple environments!
